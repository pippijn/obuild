.STATIC:
  YACC = $(check-prog yacc bison byacc)

# Maintainer
OM_YFLAGS	= $(EMPTY)

# User
YFLAGS		= $(EMPTY)

# Build system
om_YFLAGS	= $`(OM_YFLAGS) $`(YFLAGS)


%.c: %.y $(YACC)
  $(YACC) $(om_YFLAGS) -o $*.c $<


%.c %.h: %.y $(YACC)
  if $(not $(or $(mem -d, $(om_YFLAGS)), $(file-exists $*.h))):
    msg-warn ($"build of $*.h is requested, but YFLAGS does not contain '-d'")
    touch $*.h
  $(YACC) $(om_YFLAGS) -o $*.c $<
