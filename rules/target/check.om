open rules/ocaml

.PHONY: check


public.testsuite (tag) =
  global.Requires[]	= baselib
  public.ocaml-dependencies ()

  private.RESULT	= $(TESTRESULTDIR)/$(tag).rst


  testsuite.rst: $(OCamlProgram runtests, runtests)
	$< $(ROOT) $(removeprefix $(BUILDDIR)/, $(fullname .))

  $(RESULT): testsuite.rst
	mv $< $@

  check: $(RESULT)

  export
